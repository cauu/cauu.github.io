// CSS Style Guide: http://codeguide.co/#css
config = json('./config.json', { hash: true })

hexo-config(keyStr)
  keys = split('.', keyStr)
  curr = config
  for k in keys
    if curr[k]
      curr = curr[k]
    else
      return ""
  return curr

$scheme    = hexo-config('scheme') ? hexo-config('scheme') : 'Muse';
// $scheme = 'Gemini'

$variables = base $scheme;
$mixins    = base $scheme;


// Variables Layer
// --------------------------------------------------
for $variable in $variables
  @import "_variables/" + $variable;
for $inject_variable in hexo-config('injects.variable')
  if $inject_variable
    @import $inject_variable;

// Mixins Layer
// --------------------------------------------------
for $mixin in $mixins
  @import "_mixins/" + $mixin;
for $inject_mixin in hexo-config('injects.mixin')
  if $inject_mixin
    @import $inject_mixin;

// Common Layer
// --------------------------------------------------

// Scaffolding
@import "_common/scaffolding";

// Layout
@import "_common/outline";

// Components
@import "_common/components";


// Schemes Layer
// --------------------------------------------------
@import "_schemes/" + $scheme;


// Custom Layer
// --------------------------------------------------
for $inject_style in hexo-config('injects.style')
  if $inject_style
    @import $inject_style;
